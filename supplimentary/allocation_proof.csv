Allocation,
Current is FIRST FREE,
current.last_free >= 0,
,
Cases,
Left is IN USE,Right is FREE
Current = IN USE,
Right = FIRST_FREE,
Right.last_free = current.last_free - 1,
,
Left is IN USE,Right is IN USE
Current = IN USE,
,
,
Current is FREE,
current.first_free > 0,
,
Cases,
Left is FREE or Left is FIRST FREE,Right is FREE
Current = IN USE,
Right = FIRST_FREE,
Current.first_free.last_free.first_free = Current.idx + 1,
Current.first_free.last_free = Current.idx - 1,
,
Left is FREE,Right is IN USE
Current = IN USE,
Left.first_free = current.first_free,
,
Left is FIRST FREE,Right is IN USE
Current = IN USE,
Left.first_free = 0,
,
,
Current is IN USE,
Not possible,
,
,
,
Deallocation,
Current is IN USE,
,
Cases,
Left is FREE or Left is FIRST_FREE,Right is FIRST FREE
Current = FREE,
Right = FREE,
Right.last_free.first_free += left.first_free + 1,
Left.first_free.last_free += right.last_free + 1,
,
Left is FREE or Left is FIRST_FREE,Right is IN USE
Current = FREE,
Current.first_free = left.first_free + 1,
,
Left is IN USE,Right is FIRST FREE
Current = FIRST FREE,
Right = FREE,
Right.last_free.first_free += 1,
Current.last_free = Right.last_free + 1,
,
Left is IN USE,Right is IN USE
Current = FIRST FREE,
Current.last_free = 0,